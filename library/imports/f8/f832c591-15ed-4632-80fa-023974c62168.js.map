{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\draw/assets\\scripts\\draw\\touchEvent.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\draw","sourcesContent":["\r\nimport Player from \"./player\";\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport class TouchEvent extends cc.Component {\r\n\r\n    @property (cc.Node)\r\n    point_start:cc.Node = null;\r\n    @property (cc.Node)\r\n    point_end:cc.Node = null;\r\n    @property(cc.Node)\r\n    graphics_node :cc.Node =null;\r\n    @property(cc.Node)\r\n    player:cc.Node =null;\r\n\r\n    private _player :Player =null;\r\n    private _graphics :cc.Graphics =null;\r\n    onLoad () {\r\n        cc.log('register touch');\r\n        //this.node.on(cc.Node.EventType.MOUSE_DOWN, this.on_touch_start, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.on_touch_start, this);\r\n\t\t//this.node.on(cc.Node.EventType.MOUSE_MOVE, this.on_touch_move, this);\r\n\t\tthis.node.on(cc.Node.EventType.TOUCH_MOVE, this.on_touch_move, this);\r\n\t\t//this.node.on(cc.Node.EventType.MOUSE_UP, this.on_touch_end, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.on_touch_end, this);\r\n        this.point_start.active =false;\r\n        this.point_end.active =false;\r\n        this._graphics = this.graphics_node.getComponent(cc.Graphics); \r\n        this._player = this.player.getComponent(\"player\");\r\n    }\r\n    \r\n    on_touch_start(event:cc.Event.EventTouch){\r\n        cc.log('on_touch_start');\r\n        this._graphics.node.active =true;\r\n        this.point_start.active =true;\r\n        this.point_start.position=event.getLocation();//this.node.convertTouchToNodeSpace(event.touch);\r\n    }\r\n\r\n    on_touch_move(event:cc.Event.EventTouch){\r\n        this.point_end.active =true;\r\n        this.point_end.position=event.getLocation();//this.node.convertTouchToNodeSpace(event.touch);\r\n        this.drawLine(event);\r\n        let v2:cc.Vec2 = this.point_start.position.sub(event.getLocation());\r\n        this._player.drawStrack(v2.normalize(),v2.mag());\r\n    }\r\n\r\n    on_touch_end(event:cc.Event.EventTouch){\r\n        this.point_start.active =false;\r\n        this.point_end.active =false;\r\n        this._graphics.clear();\r\n        this._player.shot();\r\n    }\r\n    drawLine(event:cc.Event.EventTouch){\r\n        this._graphics.clear();\r\n        this._graphics.moveTo(event.getStartLocation().x,event.getStartLocation().y) ;\r\n        this._graphics.lineTo(event.getLocation().x,event.getLocation().y);\r\n        this._graphics.stroke();\r\n    }\r\n    // start () {\r\n\r\n    // }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}